<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

    <input type="text" id="email">

    <!-- <pre>
        1. @는 하나가 있어야 한다. - 존재하는지
        2. @ 앞에 문자가 있어야 한다. - 몇 개 있는지
        3. @ 뒤에도 문자가 있어야 한다. 
        4. @ 문자 뒤에 문자 중에 .이 있어야 한다.
        5. . 뒤에 문자열이 있어야 한다.
        - email이 정상적인지 확인하는 함수
    </pre> -->

    <script>

        // 이메일 형식을 검사하는 함수를 만든다.
        // name : checkEmail
        // parameter : 체크할 이메일 리스트
        // return : 이메일이 형식이 맞으면 true, 아니면 false
        const checkEmail = function(email) {
            
            const token = email.split("@");

            if (
                ((token.length - 1) !== 1) &&
                (token[0].length = 0) &&
                (token[1].length <= 0) &&
                (token[1].indexOf(".") === -1) &&
                ((token[1].indexOf(".") + 1) === token[1].length)

            ) {
                return false;
            };

            return true;




            // // 1) @는 하나가 있어야 한다.
            // if ((token.length - 1) !== 1) { // 1과 비교하는 것이 목적이므로 !== 2 보다 !== 1로 쓰는 것이 리더빌리티가 좋다.

            //     return false;

            // }

            // // 2) @ 앞에 문자가 있어야 한다.
            // if (token[0].length = 0) {

            //     return false;
            // }

            // // 3) @ 뒤에도 문자가 있어야 한다.
            // if (token[1].length <= 0) {

            //     return false;
            // }

            // // 4) 문자 뒤에 문자 중에 .이 있어야 한다.
            // if (token[1].indexOf(".") === -1) {

            //     return false;
            // }

            // // 5) . 뒤에 문자열이 있어야 한다.
            // if ((token[1].indexOf(".") + 1) === token[1].length) {

            //     return false;

            // }
            
            // return true;
            
        };

        
        const $email = document.getElementById("email");
        const $h1 = document.createElement("h1");
        document.body.appendChild($h1);

        $email.addEventListener('keyup', (event => {

            // console.log($email.value, $email.value.length);
            // console.log(event.currentTarget.value);
            // $email = event.currentTarget 완전히 같은 의미이나 후자 사용을 권고
            let text = event.currentTarget.value; 
                               
            // 주어진 값이 이메일인지 체크한다.            
            if (checkEmail(text) === true) {
                
                // 1) 이메일이라면 h1에 "이메일입니다."
                $h1.textContent = "이메일 형식이 정확해요!";
                

            } else {

                // 2) 그렇지 않다면 h1에 "이메일이 아닙니다."
                $h1.textContent = "이메일 형식이 틀렸어요. 다시 입력해주세요.";

            }

        }));        

    </script>
    
</body>
</html>